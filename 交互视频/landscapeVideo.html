<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>横屏视屏播放</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        html,
        body {
            width: 100%;
            height: 100%;
        }

        /*视频页面*/
        .video-box {
            position: fixed;
            display: none;
        }

        #video {
            position: absolute;
            object-fit: fill;
            z-index: -1;
        }
    </style>
</head>

<body>

    <video id="main-video" playsinline="true" webkit-playsinline="true" x5-playsinline="true"
        x5-video-orientation="portraint" x5-video-player-fullscreen="true" x5-video-player-type="h5"
        style="display: none">
        <source id="js-video-source" src="./image/video.mp4">
        </source>';
    </video>
    <canvas style="width: 100%; height:100%" id="canvas"></canvas>

    <script>

        // 手机上不支持fullscreen
        function FullScreen(el) {
            var isFullscreen = document.fullScreen || document.mozFullScreen || document.webkitIsFullScreen;
            if (!isFullscreen) { //进入全屏,多重短路表达式
                (el.requestFullscreen && el.requestFullscreen()) ||
                    (el.mozRequestFullScreen && el.mozRequestFullScreen()) ||
                    (el.webkitRequestFullscreen && el.webkitRequestFullscreen()) || (el.msRequestFullscreen && el.msRequestFullscreen());

            } else { //退出全屏,三目运算符
                document.exitFullscreen ? document.exitFullscreen() :
                    document.mozCancelFullScreen ? document.mozCancelFullScreen() :
                        document.webkitExitFullscreen ? document.webkitExitFullscreen() : '';
            }
        }
        function toggleFullScreen(e) {
            var el = e.srcElement || e.target; //target兼容Firefox
            el.innerHTML == '点我全屏' ? el.innerHTML = '退出全屏' : el.innerHTML = '点我全屏';
            FullScreen(el);
        }
        //FullScreen(document.getElementById('video'));

        // let myVideo = document.getElementById('video');
        // // myVideo.controls = 'auto';

        // let w = document.documentElement.clientWidth || document.body.clientWidth;
        // let h = document.documentElement.clientHeight || document.body.clientHeigth;
        // let cha = Math.abs(h - w) / 2;
        // myVideo.width = h;
        // myVideo.height = w;
        // myVideo.style.zIndex = 2000;
        // myVideo.style.top = 0
        // myVideo.style.transform = 'translate(-' + cha + 'px,' + cha + 'px) rotate(90deg)';
        function renderCanvas() {
            let $canva, ctx, $video, setInter;
            $canva = document.getElementById('canvas')
            $video = document.getElementById('main-video')
            ctx = $canva.getContext('2d')

            $video.play()

            render()
            setInter = setInterval(r => {
                render()
            }, 40)

            function render() {
                ctx.drawImage($video, $canva.width, 0, $canva.height, $canva.width);
            }

            // // 视频播放结束
            // $video.on('ended', function () {
            //     clearInterval(setInter);
            // });

            // // 视频被暂停
            // $video.on('pause', function () {
            //     clearInterval(setInter);
            // });
        }
        // renderCanvas()
        var ua = navigator.userAgent.split("(")[1].split(")")[0];
        var brand = "";
        var phone = [/IPHONE/gi, /huawei/gi, /mi/gi, /vivo/gi, /OPPO/gi, /samsung/gi, /SONY/gi, /Nokia/gi, /HTC/gi, /ZTE/gi, /Lenovo/gi, /ZUK/gi,]
        if (phone[0].test(ua)) {
            brand = "iPhone";
        } else if (phone[1].test(ua)) {
            brand = "HUAWEI";
        } else if (phone[2].test(ua)) {
            brand = "小米";
        } else if (phone[3].test(ua)) {
            brand = "vivo";
        } else if (phone[4].test(ua)) {
            brand = "OPPO";
        } else if (phone[5].test(ua)) {
            brand = "SAMSUNG";
        } else if (phone[6].test(ua)) {
            brand = "SONY";
        } else if (phone[7].test(ua)) {
            brand = "Nokia";
        } else if (phone[8].test(ua)) {
            brand = "HTC";
        } else if (phone[9].test(ua)) {
            brand = "ZTE";
        } else if (phone[10].test(ua) || phone[11].test(ua)) {
            brand = "Lenovo";
        } else {
            brand = "Android";
        }
        alert(brand)
        alert(window.navigator.userAgent)
    </script>
</body>

</html>